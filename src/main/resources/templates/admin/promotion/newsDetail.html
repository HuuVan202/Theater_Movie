<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layoutAdmin}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Chi tiết Khuyến mãi - Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="apple-touch-icon" sizes="180x180" th:href="@{/favicon/apple-touch-icon.png}">
    <link rel="icon" type="image/png" sizes="32x32" th:href="@{/favicon/favicon-32x32.png}">
    <link rel="icon" type="image/png" sizes="16x16" th:href="@{/favicon/favicon-16x16.png}">
    <link rel="manifest" th:href="@{/favicon/site.webmanifest}">
    <link rel="icon" type="image/x-icon" th:href="@{/favicon/favicon.ico}">
    <style>
        .user-table-wrapper {
            background: #fff;
            border-radius: 0.75rem;
            padding: 1.5rem;
            position: relative;
        }

        .action-image-section {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: nowrap;
            margin-top: 1rem;
            margin-bottom: 1rem;
            width: 100%;
        }

        #imagePreview {
            max-width: 200px;
            max-height: 200px;
            object-fit: cover;
            width: 100%;
        }

        .form-label {
            font-weight: 500;
        }

        .form-control-static {
            padding: 0.375rem 0.75rem;
            background-color: #f8f9fa;
            border: 1px solid #ced4da;
            border-radius: 0.25rem;
            min-height: 38px;
        }

        .edit-button {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
        }

        .action-buttons {
            flex: 0 0 auto;
        }

        .active-checkbox {
            flex: 0 0 auto;
        }

        .image-container {
            flex: 1;
            text-align: center;
        }

        @media (max-width: 576px) {
            .action-image-section {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }

            .action-buttons {
                width: 100%;
                text-align: center;
            }

            .active-checkbox {
                margin-bottom: 10px;
            }

            .image-container {
                width: 100%;
            }
        }
    </style>
</head>
<body>
<div layout:fragment="header">
    <div th:replace="~{fragments/title_admin :: header('Chi tiết khuyến mãi', 'bi bi-gift me-2')}"></div>
</div>
<div layout:fragment="content">
    <div class="d-flex" id="wrapper">
        <div class="container-fluid">
            <div class="user-table-wrapper p-3 p-md-4 rounded-4 shadow-lg animate-fade-in">
                <a th:href="@{/admin/promotions/edit(promotionId=${promotion.promotionId})}"
                   class="btn btn-primary btn-sm edit-button"
                   onclick="event.stopPropagation();"><i class="bi bi-pencil"></i> Sửa</a>
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">Tiêu đề</label>
                        <div class="form-control-static" th:text="${promotion.title}"></div>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Chi tiết</label>
                        <div class="form-control-static" th:text="${promotion.detail}"></div>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Giảm giá (%)</label>
                        <div class="form-control-static" th:if="${promotion.discountLevel != null}"
                             th:text="${promotion.discountLevel} + '%'"></div>
                        <div class="form-control-static" th:if="${promotion.discountLevel == null}"
                             th:text="'N/A'"></div>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Giảm giá cố định (VND)</label>
                        <div class="form-control-static" th:if="${promotion.discountAmount != null}"
                             th:text="${promotion.discountAmount} + 'đ'"></div>
                        <div class="form-control-static" th:if="${promotion.discountAmount == null}"
                             th:text="'N/A'"></div>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Số vé tối thiểu</label>
                        <div class="form-control-static"
                             th:text="${promotion.minTickets != null} ? ${promotion.minTickets} : 'Không giới hạn'"></div>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Số vé tối đa</label>
                        <div class="form-control-static"
                             th:text="${promotion.maxTickets != null} ? ${promotion.maxTickets} : 'Không giới hạn'"></div>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Ngày áp dụng</label>
                        <div class="form-control-static" th:switch="${promotion.dayOfWeek}">
                            <span th:case="null">Tất cả các ngày</span>
                            <span th:case="1">Thứ 2</span>
                            <span th:case="2">Thứ 3</span>
                            <span th:case="3">Thứ 4</span>
                            <span th:case="4">Thứ 5</span>
                            <span th:case="5">Thứ 6</span>
                            <span th:case="6">Thứ 7</span>
                            <span th:case="7">Chủ nhật</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Loại vé</label>
                        <div class="form-control-static"
                             th:text="${promotion.ticketTypeId != null and ticketTypes.containsKey(promotion.ticketTypeId)} ? ${ticketTypes[promotion.ticketTypeId].typeName} : 'Tất cả loại vé'"></div>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Bắt đầu</label>
                        <div class="form-control-static"
                             th:text="${#temporals.format(promotion.startTime, 'yyyy-MM-dd HH:mm')}"></div>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Kết thúc</label>
                        <div class="form-control-static"
                             th:text="${#temporals.format(promotion.endTime, 'yyyy-MM-dd HH:mm')}"></div>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Giới hạn sử dụng</label>
                        <div class="form-control-static"
                             th:text="${promotion.maxUsage != null} ? ${promotion.maxUsage} : 'Không giới hạn'"></div>
                    </div>
                    <div class="col-12">
                        <div class="action-image-section">
                            <div class="action-buttons">
                                <a th:href="@{/admin/promotions/list}" class="btn btn-danger">Quay lại danh sách</a>
                            </div>
                            <div class="active-checkbox">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" th:checked="${promotion.active}"
                                           disabled id="activeCheck"/>
                                    <label class="form-check-label" for="activeCheck">Hoạt động</label>
                                </div>
                            </div>
                            <div class="image-container">
                                <img th:if="${promotion.imageUrl != null and not #strings.isEmpty(promotion.imageUrl)}"
                                     th:src="@{${promotion.imageUrl}}" id="imagePreview" alt="Hình ảnh khuyến mãi"/>
                                <span th:if="${promotion.imageUrl == null or #strings.isEmpty(promotion.imageUrl)}">Không có hình ảnh</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
