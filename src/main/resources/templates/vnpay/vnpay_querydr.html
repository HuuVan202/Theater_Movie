<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Query Transaction</title>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/>
    <script th:src="@{/js/jquery.min.js}"></script>
    <link rel="apple-touch-icon" sizes="180x180" th:href="@{/favicon/apple-touch-icon.png}">
    <link rel="icon" type="image/png" sizes="32x32" th:href="@{/favicon/favicon-32x32.png}">
    <link rel="icon" type="image/png" sizes="16x16" th:href="@{/favicon/favicon-16x16.png}">
    <link rel="manifest" th:href="@{/favicon/site.webmanifest}">
    <link rel="icon" type="image/x-icon" th:href="@{/favicon/favicon.ico}">
</head>
<body>
<div class="container">
    <h3>VNPAY DEMO</h3>
    <h4>Truy vấn giao dịch</h4>
    <form id="frmQuery" th:action="@{/api/payment/query}" method="post">
        <div class="form-group">
            <label>Mã giao dịch (vnp_TxnRef)</label>
            <input class="form-control" name="order_id" type="text" required/>
        </div>
        <div class="form-group">
            <label>Thời gian tạo (vnp_CreateDate)</label>
            <input class="form-control" name="trans_date" type="text" placeholder="yyyyMMddHHmmss" required/>
        </div>
        <button type="submit" class="btn btn-primary">Gửi truy vấn</button>
    </form>

    <hr>
    <pre id="resultBox" style="margin-top: 20px;"></pre>
</div>

<script>
    $('#frmQuery').submit(function (e) {
        e.preventDefault();
        $.post($(this).attr('action'), $(this).serialize(), function (res) {
            $('#resultBox').text(JSON.stringify(res, null, 2));
        }).fail(function () {
            $('#resultBox').text('Lỗi khi gửi truy vấn.');
        });
    });
</script>
</body>
</html>
